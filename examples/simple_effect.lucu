effect get {
    fun get() int
}

fun getter(n int) handle get {
	fun { n }
}

fun getter_indirect(n int) handle get {
	getter(n)
}

fun gimme_get() handle get / get {
	get
}

fun ident(h handle get) handle get {
	h
}

fun puttwice(n int) / debug {
	with getter_indirect(n) {
		let handler = gimme_get()
		putint(get()) with handler
		let handler = ident(handler)
		putint(get()) with handler
	}
}

fun main() / debug {
	putint(420)
	puttwice(69)
}
