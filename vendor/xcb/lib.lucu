import "vendor:c"

@foreign(prefix = "xcb_", handler = uptr)
effect conn {
	# impl lib

	# TODO: cint, GetAtomNameCookie
	fun get_atom_name(atom int) int
	# TODO: GetAtomNameCookie, ^^GenericError, ^GetAtomNameReply
	fun get_atom_name_reply(cookie int, e uptr) uptr
	# TODO: ^GetAtomNameReply, cstring
	fun get_atom_name_name(r uptr) ^u8

	# TODO: drop
	fun disconnect()
}

@foreign(prefix = "xcb_")
effect lib {
	# TODO: cstring, ^cint
	fun connect(displayname uptr, screenp uptr) impl conn
}

@capability
fun link() impl lib / foreign {
	do c.link()
	link_effect("xcb")
}
